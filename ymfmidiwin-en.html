<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<link rel="SHORTCUT ICON" href="./ymfmidi.ico">
	<meta name="viewport" content="user-scalable=yes,initial-scale=1">
	<title>ymfmidi for Windows - Software OPL FM MIDI synthesizer</title>
	<link rel="stylesheet" type="text/css" href="./style.css?dummy=5">
</head>
<body>
	<h1><span style="font-size:medium;">Software OPL FM MIDI synthesizer</span><br> ymfmidi for Windows</h1>
	<div style="font-size: small; position: fixed; right: 0; top: 0; background-color: rgba(255,255,255,0.8); padding: 2px; z-index: 9999; ">
		<a href="./ymfmidiwin.html">日本語</a> | English
	</div>
	<img src="img/ymfmidiwin.png" style="width:48px;">
	<div>
		<a href="https://github.com/SimK98/ymfmidiwin/releases">Download ymfmidi for Windows</a>
	</div>
	<p style="font-weight:bold;">
		This is a port of <a href="https://github.com/devinacker/ymfmidi">ymfmidi</a>, which implements <a href="https://github.com/aaronsgiles/ymfm">ymfm</a>, a Yamaha FM sound source emulator, as a MIDI player, to Windows.
	</p>
	<p>
		The FM MIDI mentioned here refers to MIDI using the OPL3 chip found in old Sound Blaster cards and similar devices.
		Nowadays, high-quality MIDI sound sources using soundfonts are easily available, so FM MIDI cannot compete in terms of sound quality.
	</p>
	<p>
		However, since FM sound sources have long disappeared from PCs, the unique sound of FM MIDI is actually a novel experience today.
		Although there are soundfonts that try to reproduce FM sounds, FM synthesis fundamentally differs from sample-based soundfonts.
		In other words, to recreate "that particular sound from back then," faithfully reproducing the FM synthesis mechanism itself is (probably) the best approach rather than relying on soundfonts.
	</p>
	<p>
		Therefore, this software aims to emulate Yamaha's OPL-series FM sound chips and make FM sound sources available from Windows MIDI environments (midiIn/midiOut API).
	</p>
	<h3>Features</h3>
	<ul>
		<li>
			<strong>Complete FM sound source emulation, not just FM-style soundfonts</strong>
			<ul>
				<li>Emulates YAMAHA OPL-series chips (chip type selectable)</li>
				<li>Emulation at the waveform synthesis level</li>
				<li>Supports multiple chips to increase polyphony</li>
			</ul>
		</li>
		<li>
			<strong>Improved MIDI specification compatibility compared to past Windows FM MIDI</strong>
			<ul>
				<li>Supports GM/GS/XG processing (further compatibility possible by adjusting instrument definitions)</li>
				<li>Fixes issues found in previous Windows FM MIDI implementations (e.g., pitch bend handling)</li>
			</ul>
		</li>
		<li>
			<strong>Operates as a native Windows MIDI device</strong>
			<ul>
				<li>Resident software synthesizer that accepts MIDI IN input</li>
				<li>Can be used from standard Windows midiOut API applications by using virtual MIDI cables like loopMIDI</li>
				<li>Automatically enters a sleep state when no MIDI messages are present, reducing unnecessary power consumption</li>
			</ul>
		</li>
		<li>
			<strong>Real-time playback & offline rendering</strong>
			<ul>
				<li>Processes MIDI messages in real-time and outputs sound</li>
				<li>Can export MIDI playback results as WAV files</li>
			</ul>
		</li>
	</ul>
	<p>
		The core is ymfm, but most of the main code comes from ymfmidi. Sampling conversion is also from others. Many thanks for these excellent programs.
	</p>
	<p>
		Instrument definition files (*.wopl, etc.) can be created with an editor or you can use publicly available files.
		The bundled definition files with ymfmidi seem to come from <a href="https://github.com/sneakernets/DMXOPL/tree/DMXOPL3">DMXOPL</a>.
		I personally find the GENMIDI(GS).wopl there quite good.
	</p>
	<figure>
		<img src="img/ymfmidiwin_ss.png" alt="Example of ymfmidi for Windows resident in taskbar">
		<figcaption>ymfmidi for Windows Resident Version</figcaption>
	</figure>
	<figure>
		<img src="img/ymfmidiwin_ss2.png" alt="Example of playing 32ch MIDI using two console versions of ymfmidi for Windows">
		<figcaption>ymfmidi for Windows Console Version</figcaption>
	</figure>

	<h3>How to set as a MIDI output device</h3>
	<p>
		This software can receive and play back MIDI messages from MIDI IN, but cannot be selected directly as a MIDI output destination by other software.
		To select it as an output in other software, you need virtual MIDI cables such as loopMIDI.
	</p>
	<p>
		To use loopMIDI, follow these steps:
	</p>
	<ol>
		<li>Download and install loopMIDI from the <a href="https://www.tobias-erichsen.de/software/loopmidi.html" target="_blank">official loopMIDI website</a>.</li>
		<li>
			Start loopMIDI and click the "Add port (+)" button to create a new virtual MIDI port.
			You can name the port anything like "YMFM OPL FM MIDI Synthesizer".
			This will create corresponding virtual MIDI IN and OUT ports that are virtually connected.<br>
			<img src="img/ymfmidiwin_loopmidi1.png" alt="Example of adding a port in loopMIDI">
		</li>
		<li>If loopMIDI is your only MIDI IN device, simply running ymfmidiwin-synth.exe will automatically use the created MIDI IN device.</li>
	</ol>
	<p>
		If you have multiple MIDI IN devices, specify the MIDI device number explicitly with the //MIDIIN&lt;number&gt; option.
	</p>
	<p>
		If you want to use it as the default MIDI output device, install <a href="https://coolsoft.altervista.org/en/midimapper" target="_blank">CoolSoft MIDIMapper</a>.
		After installation, use the MIDIMapper Configurator to specify the virtual MIDI port you created.
	</p>
	<img src="img/ymfmidiwin_midimapper1.png" alt="Example of MIDIMapper configuration">

	<h3>Information for users who want a Windows standard FM MIDI-like sound</h3>
	<p>
		If you want to play sounds close to the Windows standard FM MIDI sound source, you need the instrument parameters used in the Windows standard Sound Blaster 16 driver.
		This data is included in FMSYNTH.BIN from the Windows NT4 DDK sample.
	</p>
	<p>
		However, since these parameter definitions are originally included for driver development (DDK), redistribution for other purposes may not be appropriate.
		Therefore, FMSYNTH.BIN is not included with this software.
		Instead, the following methods are supported as alternatives.
	</p>
	<ol>
		<li>
			Using the DDK sample FMSYNTH.BIN
			<p>
				Specify the FMSYNTH.BIN from the Sound Blaster 16 sample driver included in Windows NT4 DDK as the instrument definition file to load it.
			</p>
			<p>
				(e.g.) ymfmidiwin //MIDIIN FMSYNTH.BIN
			</p>
		</li>
		<li>
			Loading from a driver DLL
			<p>
				Some Windows NT4 Sound Blaster driver DLLs (e.g., sndblst.dll) contain data identical to FMSYNTH.BIN as a resource.
			</p>
			<p>
				This software can load instrument data from such DLL resources if you specify the DLL file.
				It does not have to be sndblst.dll as long as it contains the equivalent FMSYNTH.BIN resource.
			</p>
			<p>
				(e.g.) ymfmidiwin //MIDIIN sndblst.dll
			</p>
		</li>
	</ol>
	<p>
		<strong>Note:</strong> The drum sounds included in FMSYNTH.BIN depend on OPL rhythm sounds, which are not supported by the current ymfmidi.
		Therefore, drum sounds are loaded only from GENMIDI.op2.
		Please place GENMIDI.op2 in the same folder as ymfmidiwin.exe.
	</p>

	<h3>Q&A</h3>
	<dl>
		<dt>Q. "GENMIDI.wopl cannot be loaded" error</dt>
		<dd>A. Place GENMIDI.wopl in the same folder as the executable or specify it explicitly. If it is compressed, decompress it before use.</dd>

		<dt>Q. When using loopMIDI, if I play MIDI without starting ymfmidi and then start ymfmidi, no sound comes out</dt>
		<dd>A. Sending unnecessary data to loopMIDI can cause it to become unresponsive. Close the MIDI player and ymfmidi, delete and recreate the loopMIDI port, then try again.</dd>

		<dt>Q. Performance is slow</dt>
		<dd>A. Try using the -q option to disable screen output, or use --resampler linear for linear interpolation. Also, reduce the number of chips used.</dd>

		<dt>Q. I want to set it as the default MIDI output</dt>
		<dd>A. Recent Windows versions removed the MIDI mapper, so the OS no longer allows changing the default MIDI output device. Use CoolSoft MIDIMapper or similar tools to change it.</dd>
	</dl>

	<p>
		<a href="./download.html">Back to Download</a>
	</p>
	<p>
		<a href="./index.html">Back to Top</a>
	</p>
</body>
</html>
